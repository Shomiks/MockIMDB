{"ast":null,"code":"import { useContext, useEffect, useState } from \"react\";\nimport { __RouterContext as RouterContext } from \"react-router\";\nimport { singleMovieData } from \"../../Home page/Movies/useMoviesApi\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport axios from \"axios\";\nexport const useSingleMovie = () => {\n  const useRouter = () => useContext(RouterContext);\n\n  const {\n    match\n  } = useRouter();\n  const movieId = match.params.id;\n  const {\n    user\n  } = useAuth0();\n  const [movie, setMovie] = useState({});\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchMovie = async () => {\n      const {\n        movie,\n        comments,\n        trailer\n      } = await singleMovieData(movieId, user === null || user === void 0 ? void 0 : user.nickname);\n      setMovie({ ...movie.data,\n        ...trailer.data,\n        comments: comments.data\n      });\n    };\n\n    fetchMovie().then(() => setLoading(false));\n  }, [setMovie, movieId, user]);\n\n  const deleteMovie = async id => axios.delete(`http://localhost:5000/api/movies/${id}`);\n\n  const editMovie = async movie => axios.put(`http://localhost:5000/api/movies/${movie.id}`, movie);\n\n  return {\n    movie,\n    loading,\n    setMovie,\n    deleteMovie,\n    editMovie\n  };\n};","map":{"version":3,"sources":["/Users/milosdjurkovic/MockIMDB/src/Component/Movie page/Single movie/useSingleMovie.js"],"names":["useContext","useEffect","useState","__RouterContext","RouterContext","singleMovieData","useAuth0","axios","useSingleMovie","useRouter","match","movieId","params","id","user","movie","setMovie","loading","setLoading","fetchMovie","comments","trailer","nickname","data","then","deleteMovie","delete","editMovie","put"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,SAArB,EAAgCC,QAAhC,QAAgD,OAAhD;AACA,SAASC,eAAe,IAAIC,aAA5B,QAAiD,cAAjD;AACA,SAASC,eAAT,QAAgC,qCAAhC;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,cAAc,GAAG,MAAM;AAClC,QAAMC,SAAS,GAAG,MAAMT,UAAU,CAACI,aAAD,CAAlC;;AACA,QAAM;AAAEM,IAAAA;AAAF,MAAYD,SAAS,EAA3B;AACA,QAAME,OAAO,GAAGD,KAAK,CAACE,MAAN,CAAaC,EAA7B;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAWR,QAAQ,EAAzB;AACA,QAAM,CAACS,KAAD,EAAQC,QAAR,IAAoBd,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACe,OAAD,EAAUC,UAAV,IAAwBhB,QAAQ,CAAC,IAAD,CAAtC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMkB,UAAU,GAAG,YAAY;AAC7B,YAAM;AAAEJ,QAAAA,KAAF;AAASK,QAAAA,QAAT;AAAmBC,QAAAA;AAAnB,UAA+B,MAAMhB,eAAe,CACxDM,OADwD,EAExDG,IAFwD,aAExDA,IAFwD,uBAExDA,IAAI,CAAEQ,QAFkD,CAA1D;AAIAN,MAAAA,QAAQ,CAAC,EAAE,GAAGD,KAAK,CAACQ,IAAX;AAAiB,WAAGF,OAAO,CAACE,IAA5B;AAAkCH,QAAAA,QAAQ,EAAEA,QAAQ,CAACG;AAArD,OAAD,CAAR;AACD,KAND;;AAOAJ,IAAAA,UAAU,GAAGK,IAAb,CAAkB,MAAMN,UAAU,CAAC,KAAD,CAAlC;AACD,GATQ,EASN,CAACF,QAAD,EAAWL,OAAX,EAAoBG,IAApB,CATM,CAAT;;AAWA,QAAMW,WAAW,GAAG,MAAMZ,EAAN,IAAaN,KAAK,CAACmB,MAAN,CAAc,oCAAmCb,EAAG,EAApD,CAAjC;;AAEA,QAAMc,SAAS,GAAG,MAAMZ,KAAN,IAAgBR,KAAK,CAACqB,GAAN,CAAW,oCAAmCb,KAAK,CAACF,EAAG,EAAvD,EAA0DE,KAA1D,CAAlC;;AAEA,SAAO;AACLA,IAAAA,KADK;AAELE,IAAAA,OAFK;AAGLD,IAAAA,QAHK;AAILS,IAAAA,WAJK;AAKLE,IAAAA;AALK,GAAP;AAOD,CA9BM","sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport { __RouterContext as RouterContext } from \"react-router\";\nimport { singleMovieData } from \"../../Home page/Movies/useMoviesApi\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport axios from \"axios\";\n\nexport const useSingleMovie = () => {\n  const useRouter = () => useContext(RouterContext);\n  const { match } = useRouter();\n  const movieId = match.params.id;\n  const { user } = useAuth0();\n  const [movie, setMovie] = useState({});\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchMovie = async () => {\n      const { movie, comments, trailer } = await singleMovieData(\n        movieId,\n        user?.nickname\n      );\n      setMovie({ ...movie.data, ...trailer.data, comments: comments.data });\n    };\n    fetchMovie().then(() => setLoading(false));\n  }, [setMovie, movieId, user]);\n\n  const deleteMovie = async(id) => axios.delete(`http://localhost:5000/api/movies/${id}`);\n\n  const editMovie = async(movie) => axios.put(`http://localhost:5000/api/movies/${movie.id}`, movie);\n\n  return {\n    movie,\n    loading,\n    setMovie,\n    deleteMovie,\n    editMovie\n  };\n};\n"]},"metadata":{},"sourceType":"module"}