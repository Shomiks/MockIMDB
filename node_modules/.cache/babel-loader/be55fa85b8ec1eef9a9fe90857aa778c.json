{"ast":null,"code":"import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\nconst apiKey = \"k_f1xb5k3v\";\nconst {\n  user\n} = useAuth0();\nexport async function singleMovieData(id) {\n  const movie = await axios(`http://localhost:5000/api/movies/${id}`);\n  const comments = await axios(`http://localhost:5000/api/comments?movieId=${id}`);\n  const trailer = await axios(`https://imdb-api.com/API/YouTubeTrailer/${apiKey}/${movie.data.imdbId}`);\n  const user = await axios.put(`http://localhost:5000/api/users?id=${user.nickname}`);\n  return {\n    movie,\n    comments,\n    trailer\n  };\n}\nexport const useMoviesApi = () => {\n  const [movies, setMovies] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchMovies = async () => {\n      const categories = await axios(\"http://localhost:5000/api/categories\");\n      const movies = await axios(\"http://localhost:5000/api/movies\");\n      setCategories(categories.data);\n      setMovies(movies.data);\n    };\n\n    fetchMovies().then(() => setLoading(false));\n  }, []);\n  return {\n    movies,\n    categories,\n    loading\n  };\n};","map":{"version":3,"sources":["/Users/milosdjurkovic/MockIMDB/src/Component/Home page/Movies/useMoviesApi.js"],"names":["axios","useEffect","useState","useAuth0","apiKey","user","singleMovieData","id","movie","comments","trailer","data","imdbId","put","nickname","useMoviesApi","movies","setMovies","categories","setCategories","loading","setLoading","fetchMovies","then"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,QAAT,QAAyB,oBAAzB;AAEA,MAAMC,MAAM,GAAG,YAAf;AACA,MAAM;AAAEC,EAAAA;AAAF,IAAWF,QAAQ,EAAzB;AAEA,OAAO,eAAeG,eAAf,CAA+BC,EAA/B,EAAmC;AACxC,QAAMC,KAAK,GAAG,MAAMR,KAAK,CAAE,oCAAmCO,EAAG,EAAxC,CAAzB;AACA,QAAME,QAAQ,GAAG,MAAMT,KAAK,CACzB,8CAA6CO,EAAG,EADvB,CAA5B;AAGA,QAAMG,OAAO,GAAG,MAAMV,KAAK,CACxB,2CAA0CI,MAAO,IAAGI,KAAK,CAACG,IAAN,CAAWC,MAAO,EAD9C,CAA3B;AAGA,QAAMP,IAAI,GAAG,MAAML,KAAK,CAACa,GAAN,CAChB,sCAAqCR,IAAI,CAACS,QAAS,EADnC,CAAnB;AAIA,SAAO;AACLN,IAAAA,KADK;AAELC,IAAAA,QAFK;AAGLC,IAAAA;AAHK,GAAP;AAKD;AAED,OAAO,MAAMK,YAAY,GAAG,MAAM;AAChC,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBf,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM,CAACgB,UAAD,EAAaC,aAAb,IAA8BjB,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACkB,OAAD,EAAUC,UAAV,IAAwBnB,QAAQ,CAAC,IAAD,CAAtC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMqB,WAAW,GAAG,YAAY;AAC9B,YAAMJ,UAAU,GAAG,MAAMlB,KAAK,CAAC,sCAAD,CAA9B;AACA,YAAMgB,MAAM,GAAG,MAAMhB,KAAK,CAAC,kCAAD,CAA1B;AACAmB,MAAAA,aAAa,CAACD,UAAU,CAACP,IAAZ,CAAb;AACAM,MAAAA,SAAS,CAACD,MAAM,CAACL,IAAR,CAAT;AACD,KALD;;AAMAW,IAAAA,WAAW,GAAGC,IAAd,CAAmB,MAAMF,UAAU,CAAC,KAAD,CAAnC;AACD,GARQ,EAQN,EARM,CAAT;AAUA,SAAO;AACLL,IAAAA,MADK;AAELE,IAAAA,UAFK;AAGLE,IAAAA;AAHK,GAAP;AAKD,CApBM","sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\n\nconst apiKey = \"k_f1xb5k3v\";\nconst { user } = useAuth0();\n\nexport async function singleMovieData(id) {\n  const movie = await axios(`http://localhost:5000/api/movies/${id}`);\n  const comments = await axios(\n    `http://localhost:5000/api/comments?movieId=${id}`\n  );\n  const trailer = await axios(\n    `https://imdb-api.com/API/YouTubeTrailer/${apiKey}/${movie.data.imdbId}`\n  );\n  const user = await axios.put(\n    `http://localhost:5000/api/users?id=${user.nickname}`\n  );\n\n  return {\n    movie,\n    comments,\n    trailer,\n  };\n}\n\nexport const useMoviesApi = () => {\n  const [movies, setMovies] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchMovies = async () => {\n      const categories = await axios(\"http://localhost:5000/api/categories\");\n      const movies = await axios(\"http://localhost:5000/api/movies\");\n      setCategories(categories.data);\n      setMovies(movies.data);\n    };\n    fetchMovies().then(() => setLoading(false));\n  }, []);\n\n  return {\n    movies,\n    categories,\n    loading,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}